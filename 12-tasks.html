<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>12 Tasks</title>

  </head>
  <body>
    <h1>Tasks</h1>
    <button class="js-start" onclick="showLoading()">Start</button>
    <button class="js-add-to-cart" onclick="showCartMessage()">Add to Cart</button>
    <p class="js-cart-message"></p>
    <button class="js-add-count" onclick="messages++; displayNotification()">Add Count</button>
    <button class="js-remove-count" onclick="
    if(messages>0){
        messages--;
        if(messages===0){
            stopNotification();
        }
    }
    ">Remove Count</button>
    <script>
      // 12a
      const add = function summation(a, b) {
        console.log(1 + 2);
      };
      add();
      add();

      // 12b

      function runTwice(fun) {
        fun();
        fun();
      }
      runTwice(function () {
        console.log("12b");
      });
      runTwice(add);

      // 12c
      function updateButton() {
        setInterval(function () {
          document.querySelector(".js-start").innerText = "Finished!";
        }, 1000);
      }
      // 12d
      function showLoading(){
        const buttonElement = document.querySelector('.js-start');
        buttonElement.innerText = 'Loading...';
        
        setTimeout(function(){
          buttonElement.innerText = 'Finished!';
        }, 1000);
      }
      // 12e
      function addToCart(){
        const cartMessage = document.querySelector('.js-cart-message');
        cartMessage.innerText = 'Added to Cart!';
        setTimeout(function(){
          cartMessage.innerText = '';
        }, 2000);
      }
      // 12f
    //   let timeoutId;
    //   function showCartMessage(){
    //     const cartMessage = document.querySelector('.js-cart-message');
    //     cartMessage.innerText = 'Added to Cart!';
    //     clearTimeout(timeoutId);
    //     timeoutId = setTimeout(function(){
    //       cartMessage.innerText = '';
    //     }, 2000);
    //   }
      // 12g 12h 12i
      let messages = 2;
      let timeoutId;
      let isDisplayNotification;
      displayNotification();
      function displayNotification(){
        if(isDisplayNotification){
            return;
        }
        isDisplayNotification=true;
        timeoutId = setInterval(function(){
        if(document.title==='12 Tasks'){
            document.title = `(${messages}) New messages`;
        }
        else{
            document.title = '12 Tasks';
        }
      },1000);
      }
      function stopNotification(){
        isDisplayNotification=false;
        clearInterval(timeoutId);
        document.title='12 Tasks';
      }
        
    
     
      


    </script>
  </body>
</html>
